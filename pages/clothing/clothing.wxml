<view class="container">
  <!-- 顶部导航区 -->
  <view class="top-nav">
    <view class="nav-header">
      <view class="back-btn" bindtap="goBack">
        <text class="icon">←</text>
      </view>
      <text class="page-title">衣橱列表页</text>
      <view class="search-btn" bindtap="showSearch">
        <text class="icon">🔍</text>
      </view>
    </view>
    
    <!-- 分类标签 -->
    <scroll-view class="category-tabs" scroll-x="true">
      <view class="tab-container">
        <view class="tab-item {{currentCategory === 'all' ? 'active' : ''}}" data-category="all" bindtap="switchCategory">
          <text>总览</text>
        </view>
        <view class="tab-item {{currentCategory === '上衣' ? 'active' : ''}}" data-category="上衣" bindtap="switchCategory">
          <text>上衣</text>
        </view>
        <view class="tab-item {{currentCategory === '裤装' ? 'active' : ''}}" data-category="裤装" bindtap="switchCategory">
          <text>裤装</text>
        </view>
        <view class="tab-item {{currentCategory === '外套' ? 'active' : ''}}" data-category="外套" bindtap="switchCategory">
          <text>外套</text>
        </view>
        <view class="tab-item {{currentCategory === '鞋履' ? 'active' : ''}}" data-category="鞋履" bindtap="switchCategory">
          <text>鞋履</text>
        </view>
      </view>
    </scroll-view>
  </view>
  
  <!-- 主内容区 -->
  <view class="main-content">
    <!-- 商品卡片模块 -->
    <view class="products-container">
      <view class="products-grid" wx:if="{{!isEmptyState()}}">
        <view class="product-card" wx:for="{{filteredClothingList}}" wx:key="id" bindtap="goToDetail" bindlongpress="onLongPressClothing" data-id="{{item.id}}">
          <image class="product-image" src="{{item.image_url || '/images/default-clothing.png'}}" mode="aspectFill"></image>
          <view class="product-info">
            <text class="product-name">{{item.name}}</text>
            <text class="product-brand">{{item.brand || '无品牌'}}</text>
            <text class="product-date">购买日期: {{item.purchase_date || '未知'}}</text>
          </view>
        </view>
      </view>
      
      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{isEmptyState()}}">
        <view class="empty-content">
          <image class="empty-illustration" src="/images/empty-closet.png" mode="aspectFit"></image>
          <text class="empty-text">还没有添加衣物，快来丰富你的衣橱吧</text>
          <button class="add-clothing-button" bindtap="showAddModal">添加衣物</button>
        </view>
      </view>
  </view>
  
  <!-- 底部工具区 -->
  <view class="bottom-tools">
    <view class="add-clothing-btn" bindtap="showAddModal">
      <text class="icon">+</text>
    </view>
  </view>
  
  <!-- 搜索弹窗 -->
  <view class="search-modal" wx:if="{{showSearchModal}}">
    <view class="search-content">
      <view class="search-header">
        <text class="search-title">搜索衣物</text>
        <view class="close-btn" bindtap="hideSearch">✕</view>
      </view>
      <view class="search-box">
        <input class="search-input" placeholder="搜索衣物名称或品牌" value="{{searchKeyword}}" bindinput="onSearchInput" bindconfirm="onSearchConfirm" />
        <button class="search-button" bindtap="onSearch">搜索</button>
      </view>
      <view class="search-results">
        <view class="result-item" wx:for="{{searchResults}}" wx:key="id" bindtap="goToDetail" data-id="{{item.id}}">
          <text>{{item.name}} - {{item.brand}}</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 新增服装表单弹窗 -->
  <view class="modal" wx:if="{{showModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">新增服装</text>
        <button class="close-btn" bindtap="hideAddModal">✕</button>
      </view>
      <form class="add-form" bindsubmit="addClothing">
        <view class="form-item">
          <text class="label">名称 *</text>
          <input class="input" name="name" value="{{name}}" bindinput="onNameInput" placeholder="请输入衣物名称" required />
        </view>
        <view class="form-item">
          <text class="label">分类 *</text>
          <input class="input" name="category" value="{{category}}" bindinput="onCategoryInput" placeholder="请输入衣物分类" required />
        </view>
        <view class="form-item">
          <text class="label">颜色</text>
          <picker mode="selector" range="{{colorOptions}}" value="{{colorIndex}}" bindchange="onColorChange">
            <view class="picker">
              <text wx:if="{{color}}">{{color}}</text>
              <text wx:else>请选择颜色</text>
            </view>
          </picker>
        </view>
        <view class="form-item">
          <text class="label">品牌</text>
          <input class="input" name="brand" value="{{brand}}" bindinput="onBrandInput" placeholder="请输入品牌" />
        </view>
        <view class="form-item">
          <text class="label">购买日期</text>
          <picker mode="date" value="{{purchaseDate}}" bindchange="bindDateChange">
            <view class="date-picker">
              <text wx:if="{{purchaseDate}}">{{purchaseDate}}</text>
              <text wx:else>请选择购买日期</text>
            </view>
          </picker>
        </view>
        <view class="form-item">
          <text class="label">价格</text>
          <input class="input" name="price" value="{{price}}" bindinput="onPriceInput" type="digit" placeholder="请输入价格" />
        </view>
        <view class="form-item">
          <text class="label">图片</text>
          <view class="upload-area" bindtap="chooseAndUploadImage">
            <text wx:if="{{!imageUrl}}">点击上传图片</text>
            <image wx:if="{{imageUrl}}" src="{{imageUrl}}" class="preview-image" />
          </view>
        </view>
        <button class="submit-btn" bindtap="handleSubmit">确定</button>
      </form>
    </view>
  </view>
  
  <!-- 批量操作工具栏 -->
  <view class="batch-toolbar" wx:if="{{isBatchMode}}">
    <view class="batch-toolbar-content">
      <text class="selected-count">{{selectedClothingIds.length}} 项已选择</text>
      <view class="batch-actions">
        <button class="batch-action-btn move-btn" bindtap="batchMoveCategory">移动</button>
        <button class="batch-action-btn delete-btn" bindtap="batchDeleteClothing">删除</button>
        <button class="batch-action-btn cancel-btn" bindtap="exitBatchMode">取消</button>
      </view>
    </view>
  </view>
</view>
  </view>
