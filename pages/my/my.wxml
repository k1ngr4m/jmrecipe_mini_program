<!--pages/my/my.wxml-->
<view class="container">
  
  <scroll-view class="main-content" scroll-y>
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view wx:if="{{userInfo}}" class="user-info" bindtap="goToProfile">
        <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="user-text">
          <text class="nickname">{{userInfo.nickName}}</text>
          <text class="family-name">{{familyName || 'æˆ‘çš„å®¶åº­'}}</text>
        </view>
        <view class="arrow-icon">></view>
      </view>
      
      <view wx:else class="login-prompt">
        <text class="login-text">æœªç™»å½•</text>
        <button class="login-btn" bindtap="onLoginTap">ç‚¹å‡»ç™»å½•</button>
      </view>
    </view>
    
    <!-- ç”¨æˆ·è¯¦ç»†ä¿¡æ¯ -->
    <view wx:if="{{userDetail}}" class="user-detail-card">
      <view class="section-title">ä¸ªäººè¯¦æƒ…</view>
      <view class="detail-list">
        <view class="detail-item">
          <text class="detail-label">æ˜µç§°:</text>
          <text class="detail-value">{{userDetail.nickname}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æ€§åˆ«:</text>
          <text class="detail-value">{{userDetail.gender == 1 ? 'ç”·' : userDetail.gender == 2 ? 'å¥³' : 'æœªçŸ¥'}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">æ‰‹æœºå·:</text>
          <text class="detail-value">{{userDetail.phone || 'æœªè®¾ç½®'}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">åŸå¸‚:</text>
          <text class="detail-value">{{userDetail.city || ''}} {{userDetail.province || ''}} {{userDetail.country || ''}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">ç”Ÿæ—¥:</text>
          <text class="detail-value">{{userDetail.birthday ? (new Date(userDetail.birthday * 1000).toLocaleDateString()) : 'æœªè®¾ç½®'}}</text>
        </view>
      </view>
    </view>
    
    <!-- åŠŸèƒ½èœå•åˆ—è¡¨ -->
    <view class="menu-section">
      <view class="section-title">è®¾ç½®ä¸ç®¡ç†</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="goToProfile">
          <view class="menu-icon">ğŸ‘¤</view>
          <view class="menu-content">
            <text class="menu-text">ä¸ªäººèµ„æ–™</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToMemberManagement">
          <view class="menu-icon">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</view>
          <view class="menu-content">
            <text class="menu-text">æˆå‘˜ç®¡ç†</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToBrandManagement">
          <view class="menu-icon">ğŸ·ï¸</view>
          <view class="menu-content">
            <text class="menu-text">å“ç‰Œç®¡ç†</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToCategoryManagement">
          <view class="menu-icon">ğŸ“‚</view>
          <view class="menu-content">
            <text class="menu-text">åˆ†ç±»ç®¡ç†</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
      </view>
    </view>
    
    <!-- é€€å‡ºç™»å½•æŒ‰é’® -->
    <view class="logout-section" wx:if="{{userInfo}}">
      <button class="logout-btn" bindtap="logout">é€€å‡ºç™»å½•</button>
    </view>
  </scroll-view>
</view>