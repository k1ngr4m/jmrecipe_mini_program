<!--pages/my/my.wxml-->
<view class="container">
  
  <scroll-view class="main-content" scroll-y>
    <!-- 用户信息卡片 -->
    <view class="user-card">
      <view wx:if="{{userInfo}}" class="user-info" bindtap="goToProfile">
        <image class="avatar" src="{{userInfo.avatarUrl || '/images/default-avatar.png'}}" mode="aspectFill"></image>
        <view class="user-text">
          <text class="nickname">{{userInfo.nickName}}</text>
          <text class="family-name">{{familyName || '我的家庭'}}</text>
        </view>
        <view class="arrow-icon">></view>
      </view>
      
      <view wx:else class="login-prompt">
        <text class="login-text">未登录</text>
        <button class="login-btn" bindtap="onLoginTap">点击登录</button>
      </view>
    </view>
    
    <!-- 用户详细信息 -->
    <view wx:if="{{userDetail}}" class="user-detail-card">
      <view class="section-title">个人详情</view>
      <view class="detail-list">
        <view class="detail-item">
          <text class="detail-label">昵称:</text>
          <text class="detail-value">{{userDetail.nickname}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">性别:</text>
          <text class="detail-value">{{userDetail.gender == 1 ? '男' : userDetail.gender == 2 ? '女' : '未知'}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">手机号:</text>
          <text class="detail-value">{{userDetail.phone || '未设置'}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">城市:</text>
          <text class="detail-value">{{userDetail.city || ''}} {{userDetail.province || ''}} {{userDetail.country || ''}}</text>
        </view>
        <view class="detail-item">
          <text class="detail-label">生日:</text>
          <text class="detail-value">{{userDetail.birthday ? (new Date(userDetail.birthday * 1000).toLocaleDateString()) : '未设置'}}</text>
        </view>
      </view>
    </view>
    
    <!-- 功能菜单列表 -->
    <view class="menu-section">
      <view class="section-title">设置与管理</view>
      <view class="menu-list">
        <view class="menu-item" bindtap="goToProfile">
          <view class="menu-icon">👤</view>
          <view class="menu-content">
            <text class="menu-text">个人资料</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToMemberManagement">
          <view class="menu-icon">👨‍👩‍👧‍👦</view>
          <view class="menu-content">
            <text class="menu-text">成员管理</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToBrandManagement">
          <view class="menu-icon">🏷️</view>
          <view class="menu-content">
            <text class="menu-text">品牌管理</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
        
        <view class="menu-item" bindtap="goToCategoryManagement">
          <view class="menu-icon">📂</view>
          <view class="menu-content">
            <text class="menu-text">分类管理</text>
          </view>
          <view class="arrow-icon">></view>
        </view>
      </view>
    </view>
    
    <!-- 退出登录按钮 -->
    <view class="logout-section" wx:if="{{userInfo}}">
      <button class="logout-btn" bindtap="logout">退出登录</button>
    </view>
  </scroll-view>
</view>