<!--pages/member/member.wxml-->
<view class="container">
  <!-- 顶部导航区 -->
  <view class="top-nav">
    <view class="nav-header">
      <view class="back-btn" bindtap="goBack">
        <text class="icon">←</text>
      </view>
      <text class="page-title">成员管理</text>
      <view class="placeholder"></view>
    </view>
  </view>
  
  <!-- 主内容区 -->
  <view class="main-content">
    <!-- 成员列表 -->
    <view class="members-container">
      <view class="members-list" wx:if="{{members.length > 0}}">
        <view class="member-item {{selectedMemberId === item.id ? 'selected' : ''}}" wx:for="{{members}}" wx:key="id" bindtap="selectMember" data-id="{{item.id}}">
          <view class="member-info">
            <text class="member-name">{{item.name}}</text>
            <text class="member-detail">{{item.gender}} | {{item.birthday}}</text>
          </view>
          <view class="member-selected-icon" wx:if="{{selectedMemberId === item.id}}">
            <text class="selected-icon">✓</text>
          </view>
        </view>
      </view>
      
      <!-- 空状态 -->
      <view class="empty-state" wx:if="{{members.length === 0}}">
        <view class="empty-content">
          <image class="empty-illustration" src="/images/empty-members.png" mode="aspectFit"></image>
          <text class="empty-text">还没有添加家庭成员</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 底部工具区 -->
  <view class="bottom-tools">
    <view class="add-member-btn" bindtap="showAddModal">
      <text class="icon">+</text>
    </view>
  </view>
  
  <!-- 新增成员表单弹窗 -->
  <view class="modal" wx:if="{{showModal}}">
    <view class="modal-content">
      <view class="modal-header">
        <text class="modal-title">新增成员</text>
        <button class="close-btn" bindtap="hideAddModal">✕</button>
      </view>
      <form class="add-form" bindsubmit="saveMember">
        <view class="form-item">
          <text class="label">姓名 *</text>
          <input class="input" name="name" value="{{name}}" bindinput="onNameInput" placeholder="请输入成员姓名" required />
        </view>
        <view class="form-item">
          <text class="label">性别 *</text>
          <picker mode="selector" range="{{genderOptions}}" value="{{genderIndex}}" bindchange="onGenderChange">
            <view class="picker">
              <text wx:if="{{gender}}">{{gender}}</text>
              <text wx:else>请选择性别</text>
            </view>
          </picker>
        </view>
        <view class="form-item">
          <text class="label">生日 *</text>
          <picker mode="date" value="{{birthday}}" bindchange="bindDateChange">
            <view class="date-picker">
              <text wx:if="{{birthday}}">{{birthday}}</text>
              <text wx:else>请选择生日</text>
            </view>
          </picker>
        </view>
        <button class="submit-btn" form-type="submit">确定</button>
      </form>
    </view>
  </view>
</view>