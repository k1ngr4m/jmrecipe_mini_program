<view class="container">
  <!-- 穿搭名称输入 -->
  <view class="outfit-name-section">
    <view class="section-title">穿搭名称</view>
    <input 
      class="outfit-name-input" 
      placeholder="请输入穿搭名称" 
      value="{{outfitName}}" 
      bindinput="onOutfitNameInput"
    />
  </view>
  
  <!-- 穿搭类型选择 -->
  <view class="outfit-type-section">
    <view class="section-title">穿搭类型</view>
    <picker 
      class="outfit-type-picker" 
      mode="selector" 
      range="{{outfitTypeOptions}}" 
      range-key="name" 
      bindchange="onOutfitTypeChange"
    >
      <view class="picker-content">
        <view class="picker-text">{{outfitType || "请选择穿搭类型"}}</view>
        <view class="picker-arrow">▼</view>
      </view>
    </picker>
  </view>
  
  <!-- 一级分类导航 -->
  <scroll-view class="primary-categories" scroll-x>
    <view 
      class="category-item {{currentPrimaryCategory === 'all' ? 'active' : ''}}" 
      bindtap="switchPrimaryCategory" 
      data-category="all"
    >
      全部
    </view>
    <block wx:for="{{primaryCategories}}" wx:key="id">
      <view 
        class="category-item {{currentPrimaryCategory === item.id ? 'active' : ''}}" 
        bindtap="switchPrimaryCategory" 
        data-category="{{item.id}}"
      >
        {{item.name}}
      </view>
    </block>
  </scroll-view>
  
  <!-- 服装列表 -->
  <view class="clothing-list-section">
    <view class="section-title">选择服装</view>
    <scroll-view class="clothing-list" scroll-x>
      <view class="clothing-list-container">
        <block wx:for="{{filteredClothingList}}" wx:key="id">
          <view class="clothing-item" bindtap="selectClothing" data-item="{{item}}">
            <image class="clothing-img" src="{{item.signed_image_url || item.image_url}}" mode="aspectFill"></image>
            <view class="clothing-name">{{item.name}}</view>
          </view>
        </block>
      </view>
    </scroll-view>
  </view>
  
  <!-- Canvas画布区域 -->
  <view class="canvas-section">
    <view class="section-title">穿搭组合</view>
    <view class="canvas-container">
      <canvas 
        class="outfit-canvas" 
        canvas-id="outfitCanvas"
        style="width: 100%; height: 300px; background-color: #f5f5f5; border: 1px solid #ddd;"
      ></canvas>
      
      <!-- Canvas中的服装项 (通过canvas绘制，不再使用绝对定位模拟) -->
      <!-- 注意：服装项现在通过JavaScript绘制到canvas上 -->
      <!-- Canvas操作按钮 -->
      <view class="canvas-controls" wx:if="{{selectedClothingId}}">
        <button class="control-btn" bindtap="scaleUp">放大</button>
        <button class="control-btn" bindtap="scaleDown">缩小</button>
        <button class="control-btn" bindtap="rotate">旋转</button>
        <button class="control-btn" bindtap="removeClothingFromCanvas">删除</button>
      </view>
    </view>
  </view>

  <!-- 操作按钮 -->
  <view class="action-buttons">
    <button class="btn cancel-btn" bindtap="goBack">取消</button>
    <button class="btn save-btn" bindtap="saveOutfit">保存</button>
  </view>
</view>