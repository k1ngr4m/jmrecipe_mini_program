# 衣食住行一站式微信小程序开发文档

## 1. 项目概述

本项目是一个覆盖衣、食、住、行四大核心场景的生活管理工具，通过数据沉淀与智能推荐，提升用户的生活效率与体验。

## 2. 功能模块

### 2.1 用户系统

#### 2.1.1 用户登录
- 点击「我的」tab → 调用 wx.login() 获取 openid
- 若数据库无此用户：
  - 创建用户记录（含 nickname、openid、头像 URL、familyid）
  - 自动生成 familyid（可存储于 family 表）
- 登录后展示：nickname、family_name、头像。

#### 2.1.2 成员管理
- 「我的」tab → 『成员管理』入口。
- 初次登录自动创建一个 member_id（本人）并设为默认选中成员。
- 支持成员增删改查：字段包括 名称、性别、头像、生日。

#### 2.1.3 分类管理
- 「我的」tab → 『分类管理』。
- 当前版本仅支持 服装分类管理。
- 按性别区分一级、二级分类，可编辑并存储至数据库。

#### 2.1.4 品牌管理
- 品牌列表支持增删改查。
- 默认品牌预置在数据库中，列表按名称顺序排序。

### 2.2 核心功能模块

#### 2.2.1 智能衣橱（衣）

##### 整体说明
- 整个衣橱的数据根据familyid中的member_id区分，即一个member_id对应一个衣橱数据，并且区分性别。性别只影响默认分类。
- 要有一个衣橱表存衣橱数据，可以切换衣橱，每一个member_id对应一个衣橱id

##### 列表页
- 通过接口获取该衣橱中所包含的衣服的数据，且未删除的数据(isdel=0)
- 列表页最上方一列展示一级分类筛选，一级分类固定有一个总览tab，进入默认展示总览tab，第二列根据第一列选中的筛选状态进行展示，分类筛选根据性别区分：

**男生：**
- 一级分类：上装、下装、鞋袜
- 二级分类：
  - 上装：衬衫、T恤、毛衣/针织衫/外套/卫衣、背心
  - 下装：长裤、短裤、牛仔裤、内裤
  - 鞋袜：鞋子、袜子

**女生：**
- 一级分类：上装、下装、连衣裙、鞋袜
- 二级分类：
  - 上装：衬衫、T恤、毛衣/针织衫/外套/卫衣、背心、吊带、内衣
  - 下装：长裤、短裤、牛仔裤、内裤、裙子
  - 连衣裙：长裙、短裙
  - 鞋袜：鞋子、袜子

- 列表页第三列展示颜色筛选，展示为各个颜色的圆圈，点击颜色可以筛选对应颜色衣服数据，默认颜色筛选列表为"红橙黄绿蓝紫黑白"。
- 列表页第四列为季节筛选，通过"春、夏、秋、冬"筛选数据
- 列表页第五列为搜索框，可以根据衣服名称进行筛选。

##### 新建服装数据
- 新增按钮展示在页面悬浮在右下角，展示为"+"号，点击新增，弹出"智能识别/手动添加"选择框
- 点击手动添加，弹出新建表单弹窗，一个字段为上传图片，下面字段为名称、一级分类、二级分类(为选择一级分类时，不展示二级分类)、颜色、品牌、适用季节、购买日期、价格。
  1. 分类数据展示为上面的分类数据，如果当前member是男生，则一级分类展示"上装、下装、鞋袜"，选择上装后，展示二级分类下拉框，并展示二级分类数据
  2. 颜色展示为下拉框，默认值为"红橙黄绿蓝紫黑白"
  3. 品牌展示为下拉框，获取品牌表中的数据顺序排序，支持模糊搜索。
  4. 适用季节展示为下拉框，值为"春、夏、秋、冬"，支持多选
  5. 购买日期弹出日期选择，精确到日，转换为秒级别时间戳转给后端保存。
  6. 价格为输入框，只能输入为大于0的数字，展示人民币单位¥
  7. 点击确定提交表单，存到数据库中（包括userid、member_id、familyid、衣橱id等)
- 「智能识别」功能待设计，点击提示"正在开发中"

##### 服装详情页
- 通过接口获取该服装id的详细信息，都展示出来，可以有编辑、删除、收藏按钮，按钮都用icon展示
- 点击编辑弹出编辑页，内容与新建服装页相似
- 点击删除按钮，弹出二级确认弹窗"您确认要删除此数据吗？"取消则不删除，确定则删除数据(软删除，设置数据库中的isdel字段为1)
- 点击收藏则将该数据保存到"我的最爱"中（用表存，以后再展示）

#### 2.2.2 美食星球（食）
- 待设计

#### 2.2.3 琥珀社区（住）
- 待设计

#### 2.2.4 行者地图（行）
- 待设计

## 3. 开发规范与注意事项

### 3.1 时间字段存储与展示
- 数据库存储：秒级时间戳（字符串）。
- 前端传输：时间相关参数均传秒级时间戳给后端。
- 前端展示：展示前将时间戳转换为 YYYY-MM-DD HH:mm:ss 格式。

### 3.2 数据库通用字段要求
- 必含字段：id、isdel、created_at、updated_at。
- 尽量包含：userid、member_id、familyid（便于隔离与查询）。
- 删除逻辑：软删除（isdel 设置为 "1"）。
- 列表默认排序：updated_at 倒序。

### 3.3 接口设计规范
- 统一使用 POST 请求，参数放在 body 中。
- 接口命名规则：
  - 新增：xx/add
  - 列表：xx/list
  - 详情：xx/detail
  - 更新：xx/update
  - 删除：xx/delete

### 3.4 图片上传
- 接口调用 腾讯云 COS（沿用现有方案，无需调整）。

### 3.5 UI 图标库
- 使用：https://fontawesome.com/icons/
- 图标规范：
  - 新建：<i class="fa-solid fa-plus"></i>
  - 删除（未选中）：<i class="fa-regular fa-trash-can"></i>
  - 删除（选中）：<i class="fa-solid fa-trash-can"></i>
  - 编辑：<i class="fa-solid fa-pen-to-square"></i>
  - 收藏（未选中）：<i class="fa-regular fa-heart"></i>
  - 收藏（选中）：<i class="fa-solid fa-heart"></i>
  - 家庭：<i class="fa-solid fa-house-chimney-window"></i>
  - 分类：<i class="fa-solid fa-bars"></i>
  - 品牌：<i class="fa-solid fa-copyright"></i>
  - 搜索：<i class="fa-solid fa-magnifying-glass"></i>